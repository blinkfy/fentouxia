import{r as e,o as a,g as l,s,a as t,b as n,c as o,d as u,w as i,i as c,e as r,f as d,h as f,F as m,j as p,n as v,k as g,l as _,m as h,p as y,q as b,t as k,I as x,u as w,v as C,x as j,y as V,z as D}from"./index-DWDfi1U8.js";import{_ as U}from"./person.Ldkb8nRM.js";import{l as A}from"./user.kUnp2BN6.js";import{c as F}from"./health.CUrxMddd.js";import{C as I}from"./CaptchaBox.9FVI4L_R.js";import{_ as K}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./index.D9Dqt54M.js";const L=K({__name:"index",setup(K){const L=e(""),T=e(""),q=e(!1),z=e(!0),B=e(!1),E=e(0),M=e(0),R=e(!1),S=e(""),G=e(""),H=e(null),J=e=>{const a=[{left:"5%",top:"20%",animationDelay:"0s"},{left:"15%",top:"60%",animationDelay:"2s"},{left:"85%",top:"30%",animationDelay:"1s"},{left:"75%",top:"70%",animationDelay:"3s"},{left:"25%",top:"40%",animationDelay:"1.5s"},{left:"65%",top:"15%",animationDelay:"2.5s"},{left:"45%",top:"80%",animationDelay:"0.5s"},{left:"55%",top:"50%",animationDelay:"3.5s"}];return a[e-1]||a[0]};function N(){z.value=!z.value}function O(){q.value=!q.value}function P(){W(!1)}function Q(e){13!==e.keyCode&&"Enter"!==e.key||P()}function W(e){return L.value?T.value?!R.value||H.value&&"function"==typeof H.value.validate&&H.value.validate()?(B.value=!0,void A({username:L.value,password:T.value}).then(a=>{M.value=0,R.value=!1,S.value="",G.value="",t("token",a.token);try{!0===a.isAdmin?t("isAdmin",!0):n("isAdmin")}catch(l){}s({title:e?"è‡ªåŠ¨ç™»å½•":"ç™»å½•æˆåŠŸ",icon:"success"}),z.value?(t("savedUser",{username:L.value,password:T.value}),t("autoLogin",!0)):n("savedUser"),setTimeout(()=>{B.value=!1,o({url:"/pages/home/home"})},1e3)}).catch(e=>{B.value=!1,console.log(e);try{e&&e.msg.includes("ç½‘ç»œé”™è¯¯")||M.value++}catch(a){M.value++}M.value>3&&!R.value&&(R.value=!0,H.value&&"function"==typeof H.value.refresh&&H.value.refresh(),s({title:"å¯†ç é”™è¯¯æ¬¡æ•°è¿‡å¤šï¼Œè¯·è¾“å…¥éªŒè¯ç ",icon:"none",duration:2e3})),n("isAdmin"),n("token"),e&&e.msg&&s({title:e.msg,icon:"none"}),e&&2===e.code&&F().then(e=>{e&&e.data&&!1===e.data.online&&(s({title:"æ•°æ®åº“å…³é—­ä¸æ”¯æŒç™»å½•ï¼Œå³å°†è¿›å…¥æ¸¸å®¢æ¨¡å¼",icon:"none"}),t("guestMode",!0),setTimeout(()=>{o({url:"/pages/home/home"})},800))}).catch(()=>{s({title:"ç™»å½•å¤±è´¥",icon:"none"})})})):(G.value="éªŒè¯ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥",H.value&&"function"==typeof H.value.refresh&&H.value.refresh(),void s({title:"éªŒè¯ç é”™è¯¯",icon:"none"})):s({title:"è¯·è¾“å…¥å¯†ç ",icon:"none"}):s({title:"è¯·è¾“å…¥ç”¨æˆ·å",icon:"none"})}function X(){D({url:"/pages/register/register"})}return a(()=>{if(z.value){const e=l("savedUser");e&&(L.value=e.username,T.value=e.password,l("autoLogin")&&W(!0))}}),(e,a)=>{const l=c,s=g,t=h,n=x,o=V,D=y;return r(),u(l,{class:"login-bg"},{default:i(()=>[d(l,{class:"tech-bg"},{default:i(()=>[d(l,{class:"tech-grid"}),d(l,{class:"floating-particles"},{default:i(()=>[(r(),f(m,null,p(8,e=>d(l,{class:"particle",key:e,style:v(J(e))},null,8,["style"])),64))]),_:1}),d(l,{class:"circuit-lines"},{default:i(()=>[d(l,{class:"circuit-line line-1"}),d(l,{class:"circuit-line line-2"}),d(l,{class:"circuit-line line-3"})]),_:1})]),_:1}),d(l,{class:"login-card"},{default:i(()=>[d(l,{class:"login-header"},{default:i(()=>[d(l,{class:"app-logo"},{default:i(()=>[d(s,{src:U,class:"logo-image",mode:"aspectFit"}),d(l,{class:"logo-rings"},{default:i(()=>[d(l,{class:"ring ring-1"}),d(l,{class:"ring ring-2"}),d(l,{class:"ring ring-3"})]),_:1})]),_:1}),d(l,{class:"login-title"},{default:i(()=>[_("åˆ†æŠ•ä¾ ")]),_:1}),d(l,{class:"login-subtitle"},{default:i(()=>[d(t,{class:"subtitle-line"},{default:i(()=>[_("æ™ºèƒ½åƒåœ¾åˆ†ç±»ç³»ç»Ÿ")]),_:1}),d(t,{class:"subtitle-line"},{default:i(()=>[_("è¯·ç™»å½•æ‚¨çš„è´¦å·")]),_:1})]),_:1})]),_:1}),d(D,{class:"login-form",onSubmit:a[4]||(a[4]=b(e=>W(!1),["prevent"]))},{default:i(()=>[d(l,{class:"form-group"},{default:i(()=>[d(t,{class:"form-label"},{default:i(()=>[_("ğŸ‘¤ ç”¨æˆ·å")]),_:1}),d(l,{class:"input-wrapper-simple"},{default:i(()=>[d(n,{modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å",maxlength:"20",class:"form-input-simple",type:"text",onConfirm:P,onKeyup:[w(P,["enter"]),Q]},null,8,["modelValue"])]),_:1})]),_:1}),d(l,{class:"form-group"},{default:i(()=>[d(t,{class:"form-label"},{default:i(()=>[_("ğŸ” å¯†ç ")]),_:1}),d(l,{class:"input-wrapper-simple"},{default:i(()=>[(r(),u(n,{modelValue:T.value,"onUpdate:modelValue":a[1]||(a[1]=e=>T.value=e),key:E.value,type:q.value?"text":"password",placeholder:"è¯·è¾“å…¥å¯†ç ",maxlength:"20",class:"form-input-simple",onConfirm:P,onKeyup:[w(P,["enter"]),Q]},null,8,["modelValue","type"])),d(t,{class:"pwd-toggle",onClick:O},{default:i(()=>[_(C(q.value?"ğŸ‘ï¸":"ğŸ”’"),1)]),_:1})]),_:1})]),_:1}),R.value?(r(),u(l,{key:0,class:"form-group captcha-form-group"},{default:i(()=>[d(t,{class:"form-label"},{default:i(()=>[_("ğŸ›¡ï¸ éªŒè¯ç ")]),_:1}),d(I,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),ref_key:"captchaRef",ref:H,onConfirm:P},null,8,["modelValue"]),G.value?(r(),u(t,{key:0,class:"hint"},{default:i(()=>[_(C(G.value),1)]),_:1})):k("",!0)]),_:1})):k("",!0),d(l,{class:"options-row"},{default:i(()=>[d(l,{class:"remember-me",onClick:N},{default:i(()=>[d(l,{class:j(["tech-checkbox",{checked:z.value}])},{default:i(()=>[d(l,{class:"checkbox-inner"})]),_:1},8,["class"]),d(t,{class:"remember-text"},{default:i(()=>[_("è®°ä½æˆ‘")]),_:1})]),_:1})]),_:1}),d(o,{type:"submit",class:"login-btn",onClick:a[3]||(a[3]=e=>W(!1)),disabled:B.value},{default:i(()=>[B.value?(r(),u(l,{key:1,class:"loading-content"},{default:i(()=>[d(l,{class:"loading-spinner"}),d(t,{class:"loading-text"},{default:i(()=>[_("æ­£åœ¨ç™»å½•...")]),_:1})]),_:1})):(r(),u(l,{key:0,class:"btn-content"},{default:i(()=>[d(t,{class:"btn-icon"},{default:i(()=>[_("ğŸš€")]),_:1}),d(t,{class:"btn-text"},{default:i(()=>[_("ç™»å½•ç³»ç»Ÿ")]),_:1})]),_:1})),d(l,{class:"btn-glow"})]),_:1},8,["disabled"]),d(l,{class:"register-row"},{default:i(()=>[d(t,{class:"register-prefix"},{default:i(()=>[_("è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ")]),_:1}),d(t,{class:"register-link",onClick:X},{default:i(()=>[_("ç«‹å³æ³¨å†Œ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-94d2d304"]]);export{L as default};
