import{r as a,o as e,E as t,C as s,g as l,s as c,P as i,d as o,w as u,i as d,e as n,f as r,t as f,h as m,F as p,j as g,n as _,l as b,m as h,v,x as k,k as y,q as F,a as x,A as C}from"./index-DWDfi1U8.js";import{u as j}from"./user.kUnp2BN6.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./index.D9Dqt54M.js";const A=w({__name:"shop",setup(w){const A=a(0),D=a(!1),q=a(0),P=a(!1),z=a(!1),I=a({}),N=a({}),S=a([{name:"å…¨éƒ¨",icon:"ðŸ›ï¸"},{name:"çŽ¯ä¿ç”¨å“",icon:"ðŸŒ±"},{name:"æ•°ç é…ä»¶",icon:"ðŸ“±"},{name:"ç”Ÿæ´»ç”¨å“",icon:"ðŸ "},{name:"å­¦ä¹ ç”¨å“",icon:"ðŸ“š"},{name:"ç¾Žé£Ÿåˆ¸",icon:"ðŸ”"}]),B=a([{id:1,name:"çŽ¯ä¿è´­ç‰©è¢‹",description:"å¯é‡å¤ä½¿ç”¨çš„çŽ¯ä¿è¢‹ï¼Œå‡å°‘å¡‘æ–™æ±¡æŸ“",image:"https://image.made-in-china.com/226f3j00UTjleWhIhYoJ/Landscape-Recycle-Shopping-Bag.jpg",points:50,stock:10,category:1,hot:!0,features:"é˜²æ°´è€ç”¨ï¼Œå¯æŠ˜å æ”¶çº³ï¼Œæ‰¿é‡20kg"},{id:2,name:"ç«¹åˆ¶é¤å…·å¥—è£…",description:"å¤©ç„¶ç«¹åˆ¶ï¼ŒçŽ¯ä¿å¥åº·çš„é¤å…·å¥—è£…",image:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fcbu01.alicdn.com%2Fimg%2Fibank%2F2019%2F410%2F976%2F12755679014_1810685200.jpg&refer=http%3A%2F%2Fcbu01.alicdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1760634083&t=513c5b5d5a41f80b92a119763c25a5b5",points:120,stock:2,category:1,features:"å¤©ç„¶æŠ—èŒï¼Œè½»ä¾¿æ˜“æºå¸¦ï¼ŒåŒ…å«ç­·å­å‹ºå­å‰å­"},{id:3,name:"å¤ªé˜³èƒ½å……ç”µå®",description:"ç»¿è‰²èƒ½æºï¼Œéšæ—¶éšåœ°ä¸ºè®¾å¤‡å……ç”µ",image:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fcbu01.alicdn.com%2Fimg%2Fibank%2FO1CN01IxpKK61cUg42XsnKB_%21%216000000003604-0-cib.jpg&refer=http%3A%2F%2Fcbu01.alicdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1760634273&t=d300edc54451f9aa092378e6bbd8dc02",points:300,stock:1,category:1,limited:!0,features:"10000mAhå®¹é‡ï¼ŒIP65é˜²æ°´ï¼ŒåŒUSBè¾“å‡º"},{id:4,name:"æ— çº¿è“ç‰™è€³æœº",description:"é«˜å“è´¨éŸ³æ•ˆï¼Œèˆ’é€‚ä½©æˆ´ä½“éªŒ",image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop",points:200,stock:1,category:2,limited:!0,features:"é™å™ªåŠŸèƒ½ï¼Œç»­èˆª8å°æ—¶ï¼Œå¿«é€Ÿå……ç”µ"},{id:5,name:"æ‰‹æœºæ”¯æž¶",description:"å¤šè§’åº¦è°ƒèŠ‚ï¼Œç¨³å›ºä¸å€’",image:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.alicdn.com%2Fimgextra%2Fi3%2F91569647%2FO1CN01OquyGx2L8Nq5vUJJV_%21%2191569647.jpg&refer=http%3A%2F%2Fimg.alicdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1760634468&t=daac5fec3acce16483095a3ffd96d104",points:80,stock:2,category:2,hot:!0,features:"é“åˆé‡‘æè´¨ï¼Œå…¼å®¹4-10å¯¸è®¾å¤‡ï¼Œå¯æŠ˜å "},{id:6,name:"æ— çº¿å……ç”µå™¨",description:"å¿«å……æŠ€æœ¯ï¼Œå‘Šåˆ«çº¿ææŸç¼š",image:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fcbu01.alicdn.com%2Fimg%2Fibank%2FO1CN014SwRCT1pepuKwekC3_%21%213686345386-0-cib.jpg&refer=http%3A%2F%2Fcbu01.alicdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1760634522&t=5a627de7988d9f0c7e4eb95fd06fe510",points:150,stock:1,category:2,features:"15Wå¿«å……ï¼Œæ™ºèƒ½è¯†åˆ«ï¼Œè¿‡çƒ­ä¿æŠ¤"},{id:7,name:"ä¿æ¸©æ°´æ¯",description:"316ä¸é”ˆé’¢ï¼Œ24å°æ—¶ä¿æ¸©",image:"https://static.airchina.com.cn/upload/t/ZmcLYCAzi6SjZv_Ye4NMk7k57SI=/670x670/img/store/296/1710832561739.jpg",points:100,stock:1,category:3,features:"500mlå®¹é‡ï¼Œé˜²æ¼è®¾è®¡ï¼Œæ˜“æ¸…æ´—"},{id:8,name:"é¦™è–°åŠ æ¹¿å™¨",description:"å‡€åŒ–ç©ºæ°”ï¼Œèˆ’ç¼“å¿ƒæƒ…",image:"https://aimg8.dlssyht.cn/u/2061934/ueditor/image/1031/2061934/1736233837447324.jpg",points:180,stock:1,category:3,limited:!0,features:"è¶…å£°æ³¢æŠ€æœ¯ï¼Œ7è‰²æ°›å›´ç¯ï¼Œå®šæ—¶åŠŸèƒ½"},{id:9,name:"å¤šåŠŸèƒ½ç¬”è®°æœ¬",description:"é«˜è´¨é‡çº¸å¼ ï¼Œå¤šç§è§„æ ¼å¯é€‰",image:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fcbu01.alicdn.com%2Fimg%2Fibank%2FO1CN01GmVcgy1udzaV88fGu_%21%212211693156061-0-cib.jpg&refer=http%3A%2F%2Fcbu01.alicdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1760634668&t=de5741858f3adee222381a7c22ee5bc8",points:30,stock:5,category:4,features:"A5å°ºå¯¸ï¼Œ180é¡µï¼Œæ–¹æ ¼/æ¨ªçº¿å¯é€‰"},{id:10,name:"æŠ¤çœ¼å°ç¯",description:"LEDæŠ¤çœ¼ï¼Œæ™ºèƒ½è°ƒå…‰",image:"https://img0.baidu.com/it/u=2083889578,895933530&fm=253&fmt=auto&app=138&f=JPEG?w=825&h=500",points:250,stock:1,category:4,limited:!0,features:"æ— é¢‘é—ªï¼Œè‰²æ¸©è°ƒèŠ‚ï¼Œè§¦æŽ§å¼€å…³"},{id:11,name:"æ˜Ÿå·´å…‹å’–å•¡åˆ¸",description:"ä»»æ„é¥®å“é€šç”¨åˆ¸ï¼Œæœ‰æ•ˆæœŸ6ä¸ªæœˆ",image:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=400&h=300&fit=crop",points:80,stock:5,category:5,hot:!0,features:"å…¨å›½é—¨åº—é€šç”¨ï¼Œå¯å åŠ ä½¿ç”¨"},{id:12,name:"è‚¯å¾·åŸºå¥—é¤åˆ¸",description:"æŒ‡å®šå¥—é¤ä¼˜æƒ åˆ¸ï¼Œç¾Žå‘³äº«ä¸åœ",image:"https://images.unsplash.com/photo-1561758033-d89a9ad46330?w=400&h=300&fit=crop",points:120,stock:0,category:5,features:"å¤šç§å¥—é¤å¯é€‰ï¼Œéƒ¨åˆ†é—¨åº—é€‚ç”¨"}]);e(async()=>{let a=0;try{a=(t?t():s()).statusBarHeight||0}catch(e){a=s().statusBarHeight||0}"undefined"!=typeof document&&document.documentElement&&document.documentElement.style.setProperty("--status-bar-height",a+"px"),await E()});const E=async()=>{try{D.value=!0;if(!l("token"))return void(A.value="æœªç™»å½•");const a=await j();if(0===a.code)A.value=a.data.points||0,console.log("èŽ·å–ç”¨æˆ·ç§¯åˆ†æˆåŠŸ:",A.value);else{console.error("èŽ·å–ç”¨æˆ·ç§¯åˆ†å¤±è´¥:",a.msg);const e=l("userPoints");A.value=e||0}}catch(a){console.error("è¯·æ±‚ç”¨æˆ·ç§¯åˆ†å‡ºé”™:",a);const e=l("userPoints");A.value=e||0,c({title:"ç§¯åˆ†æ•°æ®èŽ·å–å¤±è´¥ï¼Œæ˜¾ç¤ºç¼“å­˜æ•°æ®",icon:"none",duration:2e3})}finally{D.value=!1}},L=async()=>{await E(),D.value||c({title:"ç§¯åˆ†åˆ·æ–°æˆåŠŸ",icon:"success",duration:1500})},O=i(()=>0===q.value?B.value:B.value.filter(a=>a.category===q.value)),G=i(()=>A.value>=I.value.points&&I.value.stock>0),H=a=>{const e=[{left:"10%",animationDelay:"0s"},{left:"20%",animationDelay:"2s"},{left:"70%",animationDelay:"1s"},{left:"85%",animationDelay:"3s"},{left:"45%",animationDelay:"1.5s"},{left:"60%",animationDelay:"2.5s"}];return e[a-1]||e[0]},J=()=>{P.value=!1,I.value={}},K=async()=>{if(!G.value)return void c({title:"ç§¯åˆ†ä¸è¶³æˆ–å•†å“å”®ç½„",icon:"none"});A.value-=I.value.points;const a=B.value.findIndex(a=>a.id===I.value.id);-1!==a&&(B.value[a].stock-=1),x("userPoints",A.value),N.value={...I.value},P.value=!1,z.value=!0;const e={id:Date.now(),product:N.value,exchangeTime:(new Date).toLocaleString(),status:"å·²å…‘æ¢"};let t=l("exchangeHistory")||[];t.unshift(e),x("exchangeHistory",t)},U=()=>{z.value=!1,N.value={}},T=()=>{C({url:"/pages/home/home"})},V=()=>{C({url:"/pages/map/map"})},Y=()=>{C({url:"/pages/profile/profile"})};return(a,e)=>{const t=d,s=h,l=y;return n(),o(t,{class:"shop-bg"},{default:u(()=>[r(t,{class:"custom-statusbar"}),r(t,{class:"tech-bg"},{default:u(()=>[r(t,{class:"tech-grid"}),r(t,{class:"floating-particles"},{default:u(()=>[(n(),m(p,null,g(6,a=>r(t,{class:"particle",key:a,style:_(H(a))},null,8,["style"])),64))]),_:1})]),_:1}),r(t,{class:"shop-container"},{default:u(()=>[r(t,{class:"page-title"},{default:u(()=>[r(t,{class:"title-decoration"},{default:u(()=>[r(t,{class:"title-line left"}),r(t,{class:"title-icon"},{default:u(()=>[b("ðŸ›ï¸")]),_:1}),r(t,{class:"title-line right"})]),_:1}),r(s,{class:"title-text"},{default:u(()=>[b("ç§¯åˆ†å•†åŸŽ")]),_:1}),r(s,{class:"title-subtitle"},{default:u(()=>[b("Points Mall")]),_:1}),r(t,{class:"title-glow"})]),_:1}),r(t,{class:"points-header"},{default:u(()=>[r(t,{class:"points-card"},{default:u(()=>[r(t,{class:"points-icon"},{default:u(()=>[b("ðŸ’Ž")]),_:1}),r(t,{class:"points-info"},{default:u(()=>[r(s,{class:"points-label"},{default:u(()=>[b("æˆ‘çš„ç§¯åˆ†")]),_:1}),D.value?(n(),o(t,{key:1,class:"loading-dots"},{default:u(()=>[r(s,{class:"dot"}),r(s,{class:"dot"}),r(s,{class:"dot"})]),_:1})):(n(),o(s,{key:0,class:"points-value"},{default:u(()=>[b(v(A.value),1)]),_:1}))]),_:1}),r(t,{class:k(["points-refresh",{rotating:D.value}]),onClick:L},{default:u(()=>[r(s,{class:"refresh-icon"},{default:u(()=>[b("â™»ï¸")]),_:1})]),_:1},8,["class"]),r(t,{class:"points-glow"})]),_:1}),r(t,{class:"points-tips"},{default:u(()=>[r(s,{class:"tip-icon"},{default:u(()=>[b("ðŸ’¡")]),_:1}),r(s,{class:"tip-text"},{default:u(()=>[b("æ¯æ¬¡åžƒåœ¾è¯†åˆ«å¯èŽ·å¾—1-3ç§¯åˆ†")]),_:1})]),_:1})]),_:1}),r(t,{class:"category-tabs"},{default:u(()=>[(n(!0),m(p,null,g(S.value,(a,e)=>(n(),o(t,{key:e,class:k(["tab-item",{active:q.value===e}]),onClick:a=>(a=>{q.value=a})(e)},{default:u(()=>[r(s,{class:"tab-icon"},{default:u(()=>[b(v(a.icon),1)]),_:2},1024),r(s,{class:"tab-text"},{default:u(()=>[b(v(a.name),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1}),r(t,{class:"products-section"},{default:u(()=>[r(t,{class:"section-title"},{default:u(()=>[r(s,{class:"title-icon"},{default:u(()=>[b(v(S.value[q.value].icon),1)]),_:1}),r(s,{class:"title-text"},{default:u(()=>[b(v(S.value[q.value].name),1)]),_:1}),r(s,{class:"product-count"},{default:u(()=>[b("("+v(O.value.length)+"ä»¶å•†å“)",1)]),_:1})]),_:1}),r(t,{class:"products-grid"},{default:u(()=>[(n(!0),m(p,null,g(O.value,a=>(n(),o(t,{key:a.id,class:"product-card",onClick:e=>(a=>{I.value=a,P.value=!0})(a)},{default:u(()=>[r(t,{class:"product-image-container"},{default:u(()=>[r(l,{src:a.image,class:"product-image",mode:"aspectFill"},null,8,["src"]),a.hot?(n(),o(t,{key:0,class:"product-badge hot"},{default:u(()=>[b("ðŸ”¥ çƒ­é—¨")]),_:1})):f("",!0),a.limited?(n(),o(t,{key:1,class:"product-badge limited"},{default:u(()=>[b("âš¡ é™é‡")]),_:1})):f("",!0)]),_:2},1024),r(t,{class:"product-info"},{default:u(()=>[r(s,{class:"product-name"},{default:u(()=>[b(v(a.name),1)]),_:2},1024),r(s,{class:"product-desc"},{default:u(()=>[b(v(a.description),1)]),_:2},1024),r(t,{class:"product-footer"},{default:u(()=>[r(t,{class:"product-price"},{default:u(()=>[r(s,{class:"price-icon"},{default:u(()=>[b("ðŸ’Ž")]),_:1}),r(s,{class:"price-value"},{default:u(()=>[b(v(a.points),1)]),_:2},1024)]),_:2},1024),r(t,{class:"product-stock"},{default:u(()=>[r(s,{class:"stock-text"},{default:u(()=>[b("åº“å­˜: "+v(a.stock),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),r(t,{class:"product-glow"})]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),P.value?(n(),o(t,{key:0,class:"detail-modal-overlay",onClick:J},{default:u(()=>[r(t,{class:"detail-modal",onClick:e[0]||(e[0]=F(()=>{},["stop"]))},{default:u(()=>[r(t,{class:"modal-header"},{default:u(()=>[r(l,{src:I.value.image,class:"modal-product-image",mode:"aspectFill"},null,8,["src"]),r(t,{class:"modal-close",onClick:J},{default:u(()=>[b("âœ•")]),_:1}),r(t,{class:"modal-image-glow"})]),_:1}),r(t,{class:"modal-content"},{default:u(()=>[r(t,{class:"modal-product-info"},{default:u(()=>[r(s,{class:"modal-product-name"},{default:u(()=>[b(v(I.value.name),1)]),_:1}),r(s,{class:"modal-product-desc"},{default:u(()=>[b(v(I.value.description),1)]),_:1}),r(t,{class:"modal-product-details"},{default:u(()=>[r(t,{class:"detail-item"},{default:u(()=>[r(s,{class:"detail-label"},{default:u(()=>[b("æ‰€éœ€ç§¯åˆ†:")]),_:1}),r(t,{class:"detail-price"},{default:u(()=>[r(s,{class:"price-icon"},{default:u(()=>[b("ðŸ’Ž")]),_:1}),r(s,{class:"price-value"},{default:u(()=>[b(v(I.value.points),1)]),_:1})]),_:1})]),_:1}),r(t,{class:"detail-item"},{default:u(()=>[r(s,{class:"detail-label"},{default:u(()=>[b("å‰©ä½™åº“å­˜:")]),_:1}),r(s,{class:"detail-value"},{default:u(()=>[b(v(I.value.stock)+"ä»¶",1)]),_:1})]),_:1}),r(t,{class:"detail-item"},{default:u(()=>[r(s,{class:"detail-label"},{default:u(()=>[b("å•†å“ç‰¹ç‚¹:")]),_:1}),r(s,{class:"detail-value"},{default:u(()=>[b(v(I.value.features),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(t,{class:"modal-footer"},{default:u(()=>[r(t,{class:"exchange-info"},{default:u(()=>[r(s,{class:"exchange-note"},{default:u(()=>[b("å…‘æ¢åŽç§¯åˆ†å°†ä»Žè´¦æˆ·æ‰£é™¤")]),_:1})]),_:1}),r(t,{class:k(["exchange-btn",{disabled:!G.value}]),onClick:K},{default:u(()=>[r(s,{class:"btn-icon"},{default:u(()=>[b("ðŸŽ")]),_:1}),r(s,{class:"btn-text"},{default:u(()=>[b(v(A.value>=I.value.points?I.value.stock>0?"ç«‹å³å…‘æ¢":"åº“å­˜ä¸è¶³":"ç§¯åˆ†ä¸è¶³"),1)]),_:1})]),_:1},8,["class"])]),_:1}),r(t,{class:"modal-glow"})]),_:1})]),_:1})):f("",!0),z.value?(n(),o(t,{key:1,class:"success-modal-overlay",onClick:U},{default:u(()=>[r(t,{class:"success-modal",onClick:e[1]||(e[1]=F(()=>{},["stop"]))},{default:u(()=>[r(t,{class:"success-animation"},{default:u(()=>[r(t,{class:"success-icon"},{default:u(()=>[b("ðŸŽ‰")]),_:1}),r(t,{class:"success-circle"})]),_:1}),r(s,{class:"success-title"},{default:u(()=>[b("å…‘æ¢æˆåŠŸï¼")]),_:1}),r(s,{class:"success-desc"},{default:u(()=>[b(v(N.value.name)+" å·²æ·»åŠ åˆ°æ‚¨çš„å¥–å“åº“",1)]),_:1}),r(t,{class:"success-btn",onClick:U},{default:u(()=>[r(s,{class:"success-btn-text"},{default:u(()=>[b("æŸ¥çœ‹æˆ‘çš„å¥–å“")]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0),r(t,{class:"tabbar"},{default:u(()=>[r(t,{class:"tabbar-item",onClick:T},{default:u(()=>[r(s,{class:"tabbar-icon"},{default:u(()=>[b("ðŸ ")]),_:1}),r(s,{class:"tabbar-label"},{default:u(()=>[b("é¦–é¡µ")]),_:1})]),_:1}),r(t,{class:"tabbar-item",onClick:V},{default:u(()=>[r(s,{class:"tabbar-icon"},{default:u(()=>[b("ðŸ—ºï¸")]),_:1}),r(s,{class:"tabbar-label"},{default:u(()=>[b("åœ°å›¾")]),_:1})]),_:1}),r(t,{class:"tabbar-item active"},{default:u(()=>[r(s,{class:"tabbar-icon"},{default:u(()=>[b("ðŸ›ï¸")]),_:1}),r(s,{class:"tabbar-label"},{default:u(()=>[b("å•†åŸŽ")]),_:1})]),_:1}),r(t,{class:"tabbar-item",onClick:Y},{default:u(()=>[r(s,{class:"tabbar-icon"},{default:u(()=>[b("ðŸ‘¤")]),_:1}),r(s,{class:"tabbar-label"},{default:u(()=>[b("æˆ‘çš„")]),_:1})]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-942dfe65"]]);export{A as default};
