import{$ as e,s as t,b as s,A as o,a,g as n}from"./index-DWDfi1U8.js";const d={development:{baseUrl:"",timeout:3e4},production:{baseUrl:"",timeout:3e4}}.production,i=d.baseUrl,l=Object.freeze(Object.defineProperty({__proto__:null,baseUrl:i},Symbol.toStringTag,{value:"Module"}));function u({url:d,method:l="GET",data:u={},header:r={},needAuth:m=!1,contentType:c}){const g=function(){try{return n("token")||""}catch(e){return""}}(),f={"Content-Type":c||"application/json",...r};let p=i+d;if(m&&g){const e=d.includes("?")?"&":"?";p+=`${e}token=${g}`}return new Promise((n,d)=>{e({url:p,method:l,data:u,header:f,success:e=>{if(200===e.statusCode)if(0===e.data.code||"ok"===e.data.status)n(e.data);else if(401===e.data.code)t({title:"请重新登录",icon:"none"}),s("token"),setTimeout(()=>{o({url:"/pages/index/index"})},1e3),d(e.data);else if(2===e.data.code){t({title:e.data.msg||"数据库暂时关闭，该操作暂不可用",icon:"none"});try{a("dbOffline",!0)}catch(i){}d(e.data)}else t({title:e.data.msg||"请求失败",icon:"none"}),d(e.data);else 404==(null==e?void 0:e.statusCode)&&(e.msg?429==(null==e?void 0:e.statusCode)&&(e.msg?401==(null==e?void 0:e.statusCode)&&(e.msg?403==(null==e?void 0:e.statusCode)&&(e.msg?500==(null==e?void 0:e.statusCode)&&(e.msg?400==(null==e?void 0:e.statusCode)&&(e.msg?e.msg||(e.msg="网络错误"+e.statusCode):e.msg="请求错误400"):e.msg="服务器错误500"):e.msg="禁止访问403"):e.msg="未授权401"):e.msg="流量限制429"):e.msg="网络错误404"),d(e)},fail:e=>{e&&e.msg?t({title:e.msg,icon:"none"}):t({title:"请求失败"+JSON.stringify(e),icon:"none"}),d(e)}})})}export{i as b,d as c,u as r,l as s};
