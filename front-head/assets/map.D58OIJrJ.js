function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index.D9Dqt54M.js","assets/index-DWDfi1U8.js","assets/index-GCbfsOFn.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{$ as e,a0 as n,T as o,g as t}from"./index-DWDfi1U8.js";import{r as a}from"./index.D9Dqt54M.js";const r="RZPBZ-AXLY3-ENO3Q-O3AZU-JGX4Q-KTFZU",d="https://apis.map.qq.com/ws";function i(n,o,t,a=5e3){const i={keyword:n,boundary:`nearby(${o},${t},${a})`,key:r,page_size:20,page_index:1},s=Object.keys(i).map(e=>`${e}=${encodeURIComponent(i[e])}`).join("&");return new Promise((n,o)=>{if("undefined"!=typeof window&&!window.wx&&!window.my&&!window.swan){const e=`searchPlacesCallback_${Date.now()}`,t=document.createElement("script"),a=`${d}/place/v1/search?${s}&output=jsonp&callback=${e}`;window[e]=function(a){document.head.removeChild(t),delete window[e],0===a.status?n(a):o(new Error(a.message||"搜索失败"))},t.onerror=function(){document.head.removeChild(t),delete window[e],o(new Error("网络请求失败"))},t.src=a,document.head.appendChild(t),setTimeout(()=>{window[e]&&(document.head.removeChild(t),delete window[e],o(new Error("请求超时")))},1e4)}else e({url:`${d}/place/v1/search?${s}`,method:"GET",success:e=>{0===e.data.status?n(e.data):o(new Error(e.data.message||"搜索失败"))},fail:e=>{o(e)}})})}function s(n,o){const t={location:`${n},${o}`,key:r},a=Object.keys(t).map(e=>`${e}=${encodeURIComponent(t[e])}`).join("&");return new Promise((n,o)=>{if("undefined"!=typeof window&&!window.wx&&!window.my&&!window.swan){const e=`reverseGeocoderCallback_${Date.now()}`,t=document.createElement("script"),r=`${d}/geocoder/v1/?${a}&output=jsonp&callback=${e}`;window[e]=function(a){document.head.removeChild(t),delete window[e],0===a.status?n(a):o(new Error(a.message||"地址解析失败"))},t.onerror=function(){document.head.removeChild(t),delete window[e],o(new Error("网络请求失败"))},t.src=r,document.head.appendChild(t),setTimeout(()=>{window[e]&&(document.head.removeChild(t),delete window[e],o(new Error("请求超时")))},1e4)}else e({url:`${d}/geocoder/v1/?${a}`,method:"GET",success:e=>{0===e.data.status?n(e.data):o(new Error(e.data.message||"地址解析失败"))},fail:e=>{o(e)}})})}function c(n,o,t,a=5e3){const i={category:n,boundary:`nearby(${o},${t},${a})`,key:r,page_size:20,page_index:1},s=Object.keys(i).map(e=>`${e}=${encodeURIComponent(i[e])}`).join("&");return new Promise((n,o)=>{if("undefined"!=typeof window&&!window.wx&&!window.my&&!window.swan){const e=`searchNearbyCallback_${Date.now()}`,t=document.createElement("script"),a=`${d}/place/v1/search?${s}&output=jsonp&callback=${e}`;window[e]=function(a){document.head.removeChild(t),delete window[e],0===a.status?n(a):o(new Error(a.message||"周边搜索失败"))},t.onerror=function(){document.head.removeChild(t),delete window[e],o(new Error("网络请求失败"))},t.src=a,document.head.appendChild(t),setTimeout(()=>{window[e]&&(document.head.removeChild(t),delete window[e],o(new Error("请求超时")))},1e4)}else e({url:`${d}/place/v1/search?${s}`,method:"GET",success:e=>{0===e.data.status?n(e.data):o(new Error(e.data.message||"周边搜索失败"))},fail:e=>{o(e)}})})}function w(){return!0}function u(e,n=""){return a({url:"/api/device/report_error",method:"POST",data:{device_id:e,reason:n},needAuth:!0})}function m(e){return a({url:"/api/trash-bin/add",method:"POST",data:{name:e.name,description:e.description,latitude:e.latitude,longitude:e.longitude,image:e.image},needAuth:!0})}function l(e={}){return a({url:"/api/trash-bin/list",method:"GET",data:{latitude:e.latitude,longitude:e.longitude,radius:e.radius||5e3,page:e.page||1,pageSize:e.pageSize||20}})}function p(e){return new Promise((a,r)=>{n(()=>import("./index.D9Dqt54M.js").then(e=>e.s),__vite__mapDeps([0,1,2])).then(n=>{const d=n.baseUrl+"/api/upload/trash-bin-image";o({url:d,filePath:e,name:"file",header:{Authorization:t("token")?`Bearer ${t("token")}`:""},success:e=>{try{const n=JSON.parse(e.data);200===n.code||0===n.code?a(n.data):r(new Error(n.message||n.msg||"上传失败"))}catch(n){r(new Error("上传响应解析失败"))}},fail:e=>{r(e)}})}).catch(()=>{r(new Error("无法获取上传配置"))})})}export{c as a,m as b,u as c,l as g,w as i,s as r,i as s,p as u};
